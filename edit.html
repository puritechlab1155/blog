<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <title>블로그 게시글 작성</title>
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"/>
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
            rel="stylesheet">
        <link rel="stylesheet" href="css/common.css">
        <link rel="stylesheet" href="css/main.css">

    </head>
    <body>
        <header class="header">
            <div class="header-contain">
                <h1>
                    <a class="logo" href="index.html">BLOG SITE</a>
                </h1>
                <div class="header-right">
                    <div class="search-container">
                        <input type="text" placeholder="키워드를 입력하세요." class="search-input"/>
                        <button type="button" class="search-submit"><img src="img/common/search2.png" alt="돋보기 이미지"></button>
                    </div>
                    <button type="button" class="icon-area">
                        <img src="img/common/search.png" alt="돋보기 이미지" class="search-icon">
                        <img src="img/common/close.png" alt="돋보기 이미지" class="close-icon">
                    </button>
                    <button type="button" class="ham-box" id="menuBtn">
                        <span class="ham"></span>
                        <span class="ham"></span>
                        <span class="ham"></span>
                    </button>
                </div>
            </div>
        </header>
        <!-- 메뉴 패널 -->
        <div class="menu-panel" id="menuPanel">
            <ul class="menu-list-box">
                <a href="index.html">
                    <li class="panel-list">Home</li>
                </a>
                <a href="edit.html">
                    <li class="panel-list">Edit</li>
                </a>
                <a href="myInfo.html">
                    <li class="panel-list">My Info</li>
                </a>
                <a class="log-in" href="login.html">
                    <li class="panel-list">Log In</li>
                </a>
                <!-- 로그아웃 상태시 노출 -->
                <a class="log-out" href="#">
                    <li class="panel-list">Log Out</li>
                </a>
                <!-- 로그인 상태시 노출 -->
            </ul>
        </div>
        <!-- 여기까지 메뉴 패널 -->

        <div class="content-wrap">
            <!-- 컨텐츠 시작 -->
            <div id="main">
                <div class="edit m-t-100">

                    <div class="container">
                        <div class="icon-bar">
                            <button type="button" class="photo-btn icon-btn01">
                                <div class="icon-bg">
                                    <img src="img/edit/photo-icon.png" alt="사진 첨부 아이콘">
                                </div>
                                <span class="icon-text f-14">사진 첨부</span>
                            </button>
                            <button type="button" class="video-btn icon-btn01">
                                <div class="icon-bg">
                                    <img src="img/edit/video-icon.png" alt="영상 첨부 아이콘">
                                </div>
                                <span class="icon-text f-14">영상 첨부</span>
                            </button>
                            <button type="button" class="link-btn icon-btn01">
                                <div class="icon-bg">
                                    <img src="img/edit/link-icon.png" alt="링크 아이콘">
                                </div>
                                <span class="icon-text f-14">링크</span>
                            </button>
                            <button type="button" class="place-btn icon-btn01">
                                <div class="icon-bg">
                                    <img src="img/edit/place-icon.png" alt="장소 아이콘">
                                </div>
                                <span class="icon-text f-14">장소</span>
                            </button>
                            <button type="button" class="file-btn icon-btn01">
                                <div class="icon-bg">
                                    <img src="img/edit/file-icon.png" alt="파일 첨부 아이콘">
                                </div>
                                <span class="icon-text f-14">파일 첨부</span>
                            </button>
                        </div>
                        <!-- 링크 입력 모달창 -->
                        <div id="linkModal" class="link-modal">
                            <div class="modal-content">
                                <span class="close-btn">&times;</span>
                                <h3 class="f-18">링크 입력</h3>
                                <input class="border-ef m-t-40" type="text" id="linkName" placeholder="링크명 입력">
                                <input class="border-ef m-t-20" type="url" id="linkURL" placeholder="URL 입력">
                                <button class="btn-01 m-t-20" id="submitLink">입력</button>
                            </div>
                        </div>

                        <div class="content">
                            <!-- 왼쪽 -->
                            <div class="left-panel">
                                <div class="title-container">
                                    <textarea class="edit-title" placeholder="제목을 작성해 주세요."></textarea>
                                    <div class="btn-area">
                                        <button type="button" class="color-btn icon-btn01">
                                            <div class="icon-bg">
                                                <img src="img/edit/color-icon.png" alt="제목 컬러 변경 아이콘">
                                            </div>
                                        </button>
                                        <!-- 타이틀 컬러패널 -->
                                        <div class="style-pop"> <!-- 클릭했을때 나타나기-->
                                            <ul class="array-box title-color flex-direc">
                                                <div class="g-15 flex">
                                                    <button type="button" class="pop-list"><div class="circle-color color-title"></div></button>
                                                    <button type="button" class="pop-list"><div class="circle-color color-2"></div></button>
                                                    <button type="button" class="pop-list"><div class="circle-color color-3"></div></button>
                                                    <button type="button" class="pop-list"><div class="circle-color color-4"></div></button>
                                                    <button type="button" class="pop-list"><div class="circle-color color-5"></div></button>
                                                </div>
                                                <div class="g-15 flex">
                                                    <button type="button" class="pop-list"><div class="circle-color color-6"></div></button>
                                                    <button type="button" class="pop-list"><div class="circle-color color-7"></div></button>
                                                    <button type="button" class="pop-list"><div class="circle-color color-8"></div></button>
                                                    <button type="button" class="pop-list"><div class="circle-color color-9"></div></button>
                                                    <button type="button" class="pop-list"><div class="circle-color color-10"></div></button>
                                                </div>      
                                            </ul>
                                        </div>

                                    </div>
                                </div>
                                <div class="text-area-border">
                                <textarea class="text-area" placeholder="내용을 작성해 주세요."></textarea></div>
                            </div>
                            <div class="right-panel">
                                <!-- 편집스타일 -->
                                <div class="edit-style-container">
                                    <div class="style-flex-box first-box">
                                        <select class="f-14">
                                            <option class="pretendard">프리텐다드</option><!-- 기본 설정 -->
                                            <option class="nanumgothic">나눔고딕</option>
                                            <option class="nanumbarungothic">나눔바른고딕</option>
                                            <option class="nanummyeongjo">나눔명조</option>
                                            <option class="maruburi">마루부리</option>
                                        </select>
                                        <select class="f-14 w-r">
                                            <option class="fs-22">22px</option>
                                            <option class="fs-20">20px</option>
                                            <option class="fs-18">18px</option><!-- 기본 설정 -->
                                            <option class="fs-16">16px</option>
                                        </select>
                                    </div>
                                    <div class="style-flex-box second-box">
                                        <button type="button" class="bold-btn btn-04">
                                            <img class="edit-img" src="img/edit/blod-icon.png" alt="본문 폰트 굵기 아이콘">
                                        </button>
                                        <button type="button" class="italic-btn btn-04">
                                            <img class="edit-img" src="img/edit/italic-icon.png" alt="본문 폰트 기울기 아이콘">
                                        </button>
                                    </div>
                                    <div class="style-flex-box third-box">
                                        <button type="button" class="underline-btn btn-04">
                                            <img class="edit-img" src="img/edit/underline-icon.png" alt="본문 폰트 밑줄 아이콘">
                                        </button>
                                        <button type="button" class="strike-btn btn-04">
                                            <img class="edit-img" src="img/edit/strikeline-icon.png" alt="본문 폰트 취소선 아이콘">
                                        </button>
                                    </div>
                                    <div class="style-flex-box four-box">
                                        <button type="button" class="color-btn btn-04">
                                            <img class="edit-img" src="img/edit/color-icon.png" alt="본문 폰트 컬러 아이콘">
                                        </button>
                                        <!-- 폰트 컬러 패널 -->
                                        <div class="style-pop"> <!-- 클릭했을때 나타나기-->
                                            <ul class="array-box flex-direc">
                                                <div class="g-15 flex">
                                                    <button type="button" class="pop-list"><div class="circle-color color-1"></div></button>
                                                    <button type="button" class="pop-list"><div class="circle-color color-2"></div></button>
                                                    <button type="button" class="pop-list"><div class="circle-color color-3"></div></button>
                                                    <button type="button" class="pop-list"><div class="circle-color color-4"></div></button>
                                                    <button type="button" class="pop-list"><div class="circle-color color-5"></div></button>
                                                </div>
                                                <div class="g-15 flex">
                                                    <button type="button" class="pop-list"><div class="circle-color color-6"></div></button>
                                                    <button type="button" class="pop-list"><div class="circle-color color-7"></div></button>
                                                    <button type="button" class="pop-list"><div class="circle-color color-8"></div></button>
                                                    <button type="button" class="pop-list"><div class="circle-color color-9"></div></button>
                                                    <button type="button" class="pop-list"><div class="circle-color color-10"></div></button>
                                                </div>
                                            </ul>
                                        </div>
                                        <button type="button" class="backcolor-btn btn-04">
                                            <img class="edit-img" src="img/edit/backcolor-icon.png" alt="본문 폰트 배경색 아이콘">
                                        </button>
                                        <!-- 배경컬러 패널 -->
                                        <div class="style-pop"> <!-- 클릭했을때 나타나기-->
                                            <ul class="array-box flex-direc">
                                                <div class="g-15 flex">
                                                    <button type="button" class="pop-list"><img class="array-img-20" src="img/edit/bg-none.png" alt="배경없음 아이콘"/></button>
                                                    <button type="button" class="pop-list"><div class="circle-color color-a"></div></button>
                                                    <button type="button" class="pop-list"><div class="circle-color color-b"></div></button>
                                                    <button type="button" class="pop-list"><div class="circle-color color-c"></div></button>
                                                    <button type="button" class="pop-list"><div class="circle-color color-d"></div></button>
                                                </div>
                                                <div class="g-15 flex">
                                                    <button type="button" class="pop-list"><div class="circle-color color-e"></div></button>
                                                    <button type="button" class="pop-list"><div class="circle-color color-f"></div></button>
                                                    <button type="button" class="pop-list"><div class="circle-color color-g"></div></button>
                                                    <button type="button" class="pop-list"><div class="circle-color color-h"></div></button>
                                                    <button type="button" class="pop-list"><div class="circle-color color-i"></div></button>
                                                </div>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="style-flex-box five-box">
                                        <button type="button" class="array-btn btn-04">
                                            <img class="edit-img" src="img/edit/array-icon.png" alt="정렬 아이콘">
                                        </button>
                                        <!-- 정렬 패널 -->
                                        <div class="style-pop"> <!-- 클릭했을때 나타나기-->
                                            <ul class="array-box">
                                                <button type="button" class="pop-list"><img class="array-img" src="img/edit/array-left.png" alt="왼쪽 정렬 아이콘"></button>
                                                <button type="button" class="pop-list"><img class="array-img" src="img/edit/array-center.png" alt="가운데 정렬 아이콘"></button>
                                                <button type="button" class="pop-list"><img class="array-img" src="img/edit/array-right.png" alt="오른쪽 정렬 아이콘"></button>
                                            </ul>
                                        </div>
                                        <button type="button" class="index-btn btn-04">
                                            <img class="edit-img" src="img/edit/index-icon.png" alt="리스트 스타일 아이콘">
                                        </button>
                                        <!-- 리스트 스타일 패널 -->
                                        <div class="style-pop"> <!-- 클릭했을때 나타나기-->
                                            <ul class="array-box left-position">
                                                <button type="button" class="pop-list"><img class="array-img" src="img/edit/list-dot.png" alt="왼쪽 정렬 아이콘"></button>
                                                <button type="button" class="pop-list"><img class="array-img" src="img/edit/list-num.png" alt="가운데 정렬 아이콘"></button>
                                                <button type="button" class="pop-list"><img class="array-img" src="img/edit/list-none.png" alt="오른쪽 정렬 아이콘"></button>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <!-- 해쉬태그 -->
                                <div class="hashtag-content">
                                    <div class="border-ef">
                                        <span class="" type="text" id="hashtag">
                                            <!-- 해쉬태그 입력 전 -->
                                            <div class="htagInput-item">
                                                <span>#</span>
                                                <input type="text" name="tagText" id="tagText" placeholder="태그입력" class="tagInput" oninput="resizeInput(this)" />
                                            </div>
                                            <!-- 해쉬태그 입력 후 -->
                                            <div class="htagInput-item m-r-7 keyword-btn btn-03 radius-20">
                                                <span>#</span>
                                                <span>전국 카페</span>
                                                <button type="button" class="remove-btn" aria-label="삭제">×</button>
                                            </div>
                                            <!-- 해쉬태그 입력 전 -->
                                            <div class="htagInput-item">
                                                <span>#</span>
                                                <input type="text" name="tagText" id="tagText" placeholder="태그입력" class="tagInput" oninput="resizeInput(this)" />
                                            </div>

                                        </span>
                                    </div>
                                    <span class="yellow">최대 20개까지 입력하실 수 있습니다.</span>

                                </div>
                                <!-- 버튼 -->
                                <div class="style-flex-box six-box">
                                    <button type="button" class="btn-01 preview">미리보기</button>
                                    <button type="button" class="btn-01 save">임시저장</button>
                                </div>
                                <div class="style-flex-box last-box">
                                    <button class="complete user-btn">완료</button>
                                </div>
                                <!-- 해쉬태그 입력 모달창 -->
                                <!-- <div id="hashtagModal" class="hashtag-modal">
                                    <div class="modal-content">
                                        <h3 class="f-18">해쉬태그 입력</h3>
                                        <textarea class="border-ef m-t-40" type="text" id="hashtag" placeholder="#태그입력"></textarea>
                                        <span class="yellow">최대 20개까지 입력하실 수 있습니다.</span>
                                        <div class="style-flex-box six-box">
                                            <button type="button" class="btn-01 register">등록</button>
                                            <button type="button" class="btn-01 cancel">취소</button>
                                        </div>
                                    </div>
                                </div> -->

                            </div>
                        </div>

                        

                    </div>

                </div>
            </div>
            <!-- 여기까지 컨텐츠 -->

            <!-- 하단 썸네일 -->
            <div class="thumbnail-wrapper">
                                
                <label for="thumbnailInput" class="custom-upload-button user-btn">썸네일 +</label>
                <div class="thumbnail-flex">
                    <label for="thumbnailInput">
                        <img id="thumbnailPreview" class="thumbnail-preview" alt="썸네일 미리보기" />
                    </label>
                
            
                    <input type="file" id="thumbnailInput" accept="image/*" class="file-input" />
            
                    <!-- <div class="thumbBtn-box" id="saveButtonBox" style="display: none;">
                        <button class="thumbSave user-btn" onclick="saveThumbnail()">썸네일 저장</button>
                    </div> -->

                </div>
            </div>


        </div> 

        


        <!-- 푸터 -->
        <footer class="footer">
            <div class="footer-contain">
                <!-- 소셜 아이콘 -->
                <div class="social-icons">
                    <a href="https://www.facebook.com" target="_blank">
                        <img src="img/common/facebook.png" alt="facebook">
                    </a>
                    <a href="https://www.spacex.com" target="_blank">
                        <img src="img/common/xmark.png" alt="xmark">
                    </a>
                    <a href="https://www.instagram.com" target="_blank">
                        <img src="img/common/instagram.png" alt="instagram">
                    </a>
                    <a href="https://blog.naver.com" target="_blank">
                        <img src="img/common/blogger.png" alt="blogger">
                    </a>
                    <a href="https://www.youtube.com" target="_blank">
                        <img src="img/common/youtube.png" alt="youtube">
                    </a>
                    <a href="mailto:example@email.com">
                        <img src="img/common/email.png" alt="email">
                    </a>
                </div>

                <div class="footer-text">
                    BlogStory Ⓒ 2025 Magazine Lab
                </div>

            </div>
        </footer>

        <script src="js/script.js"></script>

        <script>
            function formatText(command) {
                document.execCommand(command, false, null);
            }

            // 링크버튼 모달
            document.addEventListener("DOMContentLoaded", function () {
                const modal = document.getElementById("linkModal");
                const openBtn = document.querySelector(".link-btn");
                const closeBtn = document.querySelector(".close-btn");
                const submitBtn = document.getElementById("submitLink");

                // 모달 열기
                openBtn.addEventListener("click", function () {
                    modal.style.display = "flex";
                });

                // 모달 닫기
                closeBtn.addEventListener("click", function () {
                    modal.style.display = "none";
                });

                // 입력 버튼 클릭 시
                submitBtn.addEventListener("click", function () {
                    const linkName = document.getElementById("linkName").value;
                    const linkURL = document.getElementById("linkURL").value;
                    
                    if (linkName && linkURL) {
                        console.log("링크명:", linkName, "URL:", linkURL);
                        alert("링크가 추가되었습니다!");
                        modal.style.display = "none"; // 모달 닫기
                    } else {
                        alert("링크명과 URL을 입력해주세요!");
                    }
                });

                // 모달 외부 클릭 시 닫기
                window.addEventListener("click", function (event) {
                    if (event.target === modal) {
                        modal.style.display = "none";
                    }
                });
            });


            // 해쉬태그 입력 모달창
            document.addEventListener("DOMContentLoaded", function () {
                const modal = document.getElementById("hashtagModal");
                const openBtn = document.querySelector(".complete.user-btn");
                const registerBtn = document.querySelector(".btn-01.register");
                const cancelBtn = document.querySelector(".btn-01.cancel");
                const hashtagInput = document.getElementById("hashtag");

                // 모달 열기
                openBtn.addEventListener("click", function () {
                    modal.style.display = "flex";
                });

                // 등록 버튼 클릭 시
                registerBtn.addEventListener("click", function () {
                    const hashtag = hashtagInput.value;

                    if (hashtag) {
                        console.log("해시태그:", hashtag);
                        alert("해시태그가 등록되었습니다!");
                        modal.style.display = "none";
                        hashtagInput.value = "";
                    } else {
                        alert("해시태그를 입력해주세요!");
                    }
                });

                // 취소 버튼 클릭 시
                cancelBtn.addEventListener("click", function () {
                    modal.style.display = "none";
                    hashtagInput.value = "";
                });

                // 모달 외부 클릭 시 닫기
                window.addEventListener("click", function (event) {
                    if (event.target === modal) {
                        modal.style.display = "none";
                        hashtagInput.value = "";
                    }
                });
            });


            // 정렬 아이콘 버튼 이미지 경로변경
            document.querySelectorAll(".array-img").forEach((img, index) => {
                const originalSrc = img.src;
                img.addEventListener("mouseenter", () => {
                    img.src = originalSrc.replace(".png", "-a.png");
                });
                img.addEventListener("mouseleave", () => {
                    img.src = originalSrc;
                });
            });

            // 리스트 스타일 아이콘 버튼 이미지 경로변경
            document.querySelectorAll(".array-img").forEach((img, index) => {
                const originalSrc = img.src;
                img.addEventListener("mouseenter", () => {
                    img.src = originalSrc.replace(".png", "-a.png");
                });
                img.addEventListener("mouseleave", () => {
                    img.src = originalSrc;
                });
            });


            // 해쉬태그 input 텍스트에 맞게 자동 넓이조절
            function resizeInput(input) {
                input.style.width = '20px'; // 초기화
                input.style.width = (input.scrollWidth) + 'px';
            }




            // 썸네일 관련

            const input = document.getElementById('thumbnailInput');
            const preview = document.getElementById('thumbnailPreview');

            // 이미지 리사이징 함수 (1:1 정사각형으로)
            function resizeToSquare(file, size, callback) {
            const reader = new FileReader();
            reader.onload = function (e) {
                const img = new Image();
                img.onload = function () {
                const canvas = document.createElement('canvas');
                canvas.width = size;
                canvas.height = size;

                const ctx = canvas.getContext('2d');
                const minSide = Math.min(img.width, img.height);
                const sx = (img.width - minSide) / 2;
                const sy = (img.height - minSide) / 2;

                ctx.drawImage(img, sx, sy, minSide, minSide, 0, 0, size, size);

                const resizedDataUrl = canvas.toDataURL('image/jpeg');
                callback(resizedDataUrl);
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
            }

            // 이미지 업로드 시: 리사이즈 + 미리보기 표시
            input.addEventListener('change', function () {
            const file = input.files[0];
            if (file) {
                resizeToSquare(file, 300, function (squareUrl) {
                preview.src = squareUrl;
                preview.style.display = 'block';
                });
            }
            });


        </script>

    </body>
</html>